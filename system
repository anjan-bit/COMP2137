#!/bin/bash

# Gather system information
USERNAME=$(whoami)
DATE_TIME=$(date "+%Y-%m-%d %H:%M:%S")
HOSTNAME=$(hostname)
OS_NAME=$(source /etc/os-release && echo "$PRETTY_NAME")
UPTIME=$(uptime -p)

# Gather hardware information
CPU_MODEL=$(lshw -class processor | grep "product" | awk -F ': ' '{print $2}')
RAM_SIZE=$(free -h | awk '/Mem:/ {print $2}')
DISK_INFO=$(lsblk -o NAME,MODEL,SIZE | grep -v "loop")
VIDEO_CARD=$(lshw -class display | grep "product" | awk -F ': ' '{print $2}')

# Gather network information
FQDN=$(hostname -f)
HOST_IP=$(ip route get 1.1.1.1 | awk '{print $7; exit}')
GATEWAY_IP=$(ip route | grep default | awk '{print $3}')
DNS_SERVER=$(cat /etc/resolv.conf | grep nameserver | awk '{print $2}')

# Gather system status
USERS_LOGGED_IN=$(who | awk '{print $1}' | sort | uniq | paste -sd "," -)
DISK_SPACE=$(df -h --output=target,avail)
PROCESS_COUNT=$(ps aux --no-headers | wc -l)
LOAD_AVERAGES=$(uptime | awk -F'load average:' '{print $2}' | sed 's/,//g')
LISTENING_PORTS=$(ss -tuln | awk '{print $5}' | grep ':' | awk -F ':' '{print $NF}' | sort -n | uniq | paste -sd "," -)
UFW_STATUS=$(ufw status | grep "Status" | awk '{print $2}')

# Print the system report
cat << EOF

System Report generated by $USERNAME, $DATE_TIME

System Information
------------------
Hostname: $HOSTNAME
OS: $OS_NAME
Uptime: $UPTIME

Hardware Information
--------------------
CPU: $CPU_MODEL
RAM: $RAM_SIZE
Disks:
$DISK_INFO
Video: $VIDEO_CARD

Network Information
-------------------
FQDN: $FQDN
Host Address: $HOST_IP
Gateway IP: $GATEWAY_IP
DNS Server: $DNS_SERVER

System Status
-------------
Users Logged In: $USERS_LOGGED_IN
Disk Space:
$DISK_SPACE
Process Count: $PROCESS_COUNT
Load Averages: $LOAD_AVERAGES
Listening Network Ports: $LISTENING_PORTS
UFW Status: $UFW_STATUS

EOF
